{% extends 'base.html' %}

{% block title %}Generate Settings{% endblock %}

{% block content %}
<div class="container">
    <h2 class="center">Generate Synthetic Data</h2>
    <p class="center">Create realistic mock data for your analytics testing</p>

    <form id="personaForm" class="center">
        <!-- Add CSRF token -->
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <!-- Platform Selection -->
        <h3 class="center">Select Platform</h3>
        <div class="platform-options responsive-grid">
            <label class="selection-label selected">
                <input type="radio" name="platform" value="instagram" checked class="platform-radio">
                <i class="fab fa-instagram platform-icon"></i> Instagram
            </label>
            <label class="selection-label">
                <input type="radio" name="platform" value="youtube" class="platform-radio">
                <i class="fab fa-youtube platform-icon"></i> YouTube
            </label>
            <label class="selection-label">
                <input type="radio" name="platform" value="tiktok" class="platform-radio">
                <i class="fab fa-tiktok platform-icon"></i> TikTok
            </label>
        </div>

        <!-- User Persona -->
        <h3 class="center">User Persona</h3>
        <div class="platform-options responsive-grid">
            <label class="selection-label">
                <input type="radio" name="persona" value="career" class="platform-radio">
                <i class="fas fa-briefcase platform-icon"></i> Career Pro
            </label>
            <label class="selection-label">
                <input type="radio" name="persona" value="fitness" class="platform-radio">
                <i class="fas fa-dumbbell platform-icon"></i> Fitness
            </label>
            <label class="selection-label selected">
                <input type="radio" name="persona" value="traveler" checked class="platform-radio">
                <i class="fas fa-plane platform-icon"></i> Traveler
            </label>
            <label class="selection-label">
                <input type="radio" name="persona" value="foodie" class="platform-radio">
                <i class="fas fa-utensils platform-icon"></i> Foodie
            </label>
            <label class="selection-label">
                <input type="radio" name="persona" value="techie" class="platform-radio">
                <i class="fas fa-laptop-code platform-icon"></i> Techie
            </label>
        </div>

        <!-- Activity Level -->
        <h3 class="center">Activity Level</h3>
        <div class="platform-options responsive-grid">
            <label class="selection-label">
                <input type="radio" name="activity" value="low" class="platform-radio">
                <span>Low</span>
            </label>
            <label class="selection-label selected">
                <input type="radio" name="activity" value="medium" checked class="platform-radio">
                <span>Medium</span>
            </label>
            <label class="selection-label">
                <input type="radio" name="activity" value="high" class="platform-radio">
                <span>High</span>
            </label>
        </div>

        <!-- Data Type -->
        <h3 class="center">Data Type</h3>
        <div class="platform-options responsive-grid" id="outputOptions">
            <!-- Instagram Options -->
            <label class="selection-label platform-specific instagram selected">
                <input type="radio" name="output_filename" value="liked_posts.json" checked class="platform-radio">
                <i class="fas fa-heart platform-icon"></i> Liked Posts (liked_posts.json)
            </label>
            <label class="selection-label platform-specific instagram">
                <input type="radio" name="output_filename" value="saved_posts.json" class="platform-radio">
                <i class="fas fa-bookmark platform-icon"></i> Saved Posts (saved_posts.json)
            </label>
            <label class="selection-label platform-specific instagram">
                <input type="radio" name="output_filename" value="videos_watched.json" class="platform-radio">
                <i class="fas fa-play-circle platform-icon"></i> Watch History (videos_watched.json)
            </label>

            <!-- YouTube Options -->
            <label class="selection-label platform-specific youtube d-none">
                <input type="radio" name="output_filename" value="watch-history.json" class="platform-radio">
                <i class="fas fa-history platform-icon"></i> Watch History (watch-history.json)
            </label>

            <!-- TikTok Options -->
            <label class="selection-label platform-specific tiktok d-none">
                <input type="radio" name="output_filename" value="user_data.json" class="platform-radio">
                <i class="fas fa-user-circle platform-icon"></i> User Data (user_data.json)
            </label>
        </div>

        <!-- Generate Button -->
        <div class="center">
            <button type="button" id="generateButton" class="button-link btn-clean">
                Generate Synthetic Data
            </button>
        </div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="center d-none">
            <div class="loader-overlay loader-container">
                <div class="loader loader-element"></div>
            </div>
            <p>Generating data...</p>
        </div>

    </form>

    <!-- Result Overlay -->
    <div id="resultCard" class="loader-overlay result-card-overlay d-none">
        <div class="loader-overlay-content">
            <i class="fas fa-times close-overlay-icon" id="closeOverlayBtn"></i>
            <i class="fas fa-check-circle success-icon-large"></i>
            <h2 class="result-title">Data Generated!</h2>
            <p id="statsMessage" class="result-message"></p>
            <a id="downloadLink" href="#" class="button-link btn-download">Download File</a>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="{{ url_for('static', filename='js/generate_synthetic_data.js') }}" nonce="{{ csp_nonce }}"
    integrity="sha384-FgyZDT426KC1ApCk3YDn8QT7WHnrb5HbL3UD7UpGIVtPo3igIY4MXxrosPNNMYhe" crossorigin="anonymous"
    defer></script>
{% endblock %}